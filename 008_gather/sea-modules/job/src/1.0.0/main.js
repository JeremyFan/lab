define("job/src/1.0.0/main",["backbone","./views/app","./common/util","./collections/job-info-collection","./models/job-info-model","./views/job-info-view","./templates/templates_module","./templates/templates.html","./collections/contact-collection","./models/contact-model","./views/contact-view","./views/person-card-view","./common/view-util","./views/dialog-view","./models/dialog-model","autocompleter","autocompleterStyle","./views/message-view","./views/browser-view","./common/antiXSS","./models/switch-model","./views/switch-view","./models/industry-info-model","./views/industry-info-view","./routers/subscribe_and_publish","./views/my-job-view","./views/my-tag-view","./views/industry-tag-view","./views/search-job-view","cookie"],function(a){a("backbone"),window.buriedPoint=function(a){seajs.log("buriedPoint");try{wa_regIdCount(a)}catch(b){seajs.log(b)}};var b=a("./views/app");window.appView=new b,"object"!=typeof JSON&&(a.async("json"),a.async("placeholders").enable())}),define("job/src/1.0.0/views/app",["job/src/1.0.0/common/util","job/src/1.0.0/collections/job-info-collection","job/src/1.0.0/models/job-info-model","job/src/1.0.0/views/job-info-view","job/src/1.0.0/templates/templates_module","job/src/1.0.0/collections/contact-collection","job/src/1.0.0/models/contact-model","job/src/1.0.0/views/contact-view","job/src/1.0.0/views/person-card-view","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/browser-view","job/src/1.0.0/common/antiXSS","job/src/1.0.0/models/switch-model","job/src/1.0.0/views/switch-view","job/src/1.0.0/models/industry-info-model","job/src/1.0.0/views/industry-info-view","job/src/1.0.0/routers/subscribe_and_publish","job/src/1.0.0/views/my-job-view","job/src/1.0.0/views/my-tag-view","job/src/1.0.0/views/industry-tag-view","job/src/1.0.0/views/search-job-view","cookie"],function(a,b,c){var d=a("job/src/1.0.0/common/util"),e=a("job/src/1.0.0/collections/job-info-collection"),f=a("job/src/1.0.0/routers/subscribe_and_publish"),g=a("job/src/1.0.0/models/contact-model"),h=a("job/src/1.0.0/views/my-job-view"),i=a("job/src/1.0.0/views/my-tag-view"),j=a("job/src/1.0.0/views/industry-tag-view"),k=a("job/src/1.0.0/views/person-card-view"),l=a("job/src/1.0.0/views/search-job-view"),m=a("job/src/1.0.0/templates/templates_module");a("cookie");var n=Backbone.View.extend({el:$(document.body),events:{"mouseenter .jobdynamic .d_name a.n_t":"loadOnePerson","mouseleave .jobdynamic .d_name":"hideCard","click .recruit .delete":"clearRecruit","click .newpopbox .nexico":"closeTestDiv","click .newpopbox .newclz":"closeTestDiv","click .get_more_feed":"getMoreData","click #careerTab":"showIndustryInfo","click #employmentTab":"showJobInfo"},dynamicPeople:{},initialize:function(){_.bindAll(this,"adjustFrame","getMoreData"),this.adjustFrame(),this.jobInfoCollection=new e([],{viewContainer:$(".hpmwp #jobfeedContainer"),url:d.url.jobInfo,type:1}),this.industryInfoCollection=new e([],{viewContainer:$(".hpmwp #industryfeedContainer"),url:d.url.industryInfo,type:2}),window.jobCollection=this.jobInfoCollection,$(window).resize(this.adjustFrame),this.render(),this.initDataFromServer()},initJobInfo:function(a){a=a?a:{},a.reset&&jobCollection.reset([]),jobCollection.initData()},initDataFromServer:function(){this.initJobInfo();var a=$(".bottomload"),b=a.find(".loading");a.show(),$(window).scroll(this.getMoreData),f.subscribe("loading_jobCollection",function(a,c){seajs.log("scroll subscribe:callback:"+a),c&&200==c.returnCode&&c.data&&!c.data.length?b.html("没有更多内容了~"):b.html("<a href='javascript:void(0)' class='get_more_feed'>点击加载更多</a>")}),$.ajax({type:"POST",url:d.url.workInfo,dataType:"json",data:{},success:function(a){if(200==a.returnCode){var b=new g;b.set(b.parse(a.data));var c=new h({model:b});c.render($(".myjobnew"));var d=new i({model:b});d.render($(".t_bot .jobnews")),isFirstVisit&&d.toggleAddTag(),window.myJobModel=b}else seajs.log(a)},error:function(){seajs.log("location get failed.")}}),$.ajax({type:"POST",url:d.url.industryTag,dataType:"json",data:{},success:function(a){if(200==a.returnCode){var b=new j({model:{tags:a.data}});b.render($(".t_bot .info"))}else seajs.log(a)},error:function(){seajs.log("location get failed.")}})},showIndustryInfo:function(){window.buriedPoint(35506044),$(".t_top li a").addClass("t_act"),$(".t_top li.r_b a").removeClass("t_act"),$("#jobfeedContainer").hide(),$("#industryfeedContainer").show(),$(".jobnews").hide(),$(".info").show(),$(".bottomload .loading").html("<a href='javascript:void(0)' class='get_more_feed'>点击加载更多</a>"),window.jobCollection=this.industryInfoCollection,jobCollection.length||jobCollection.initData()},showJobInfo:function(){window.buriedPoint(35506043),$(".t_top li a").removeClass("t_act"),$(".t_top li.r_b a").addClass("t_act"),$("#industryfeedContainer").hide(),$(".info").hide(),$("#jobfeedContainer").show(),$(".jobnews").show(),$(".bottomload .loading").html("<a href='javascript:void(0)' class='get_more_feed'>点击加载更多</a>"),window.jobCollection=this.jobInfoCollection},getMoreData:function(){var a,b,c=$(".bottomload"),d=c.find(".loading");a=c.find("span"),b=$(document).scrollTop(),this.floatPieces(),c.find(".get_more_feed").length&&b+$(window).height()>=$(document).height()-20&&jobCollection.length&&(c.show(),d.html("加载中...<span></span>"),jobCollection.getMoreData())},render:function(){seajs.log("app render"),$(".jobsearch").html(l.render())},adjustFrame:function(){this.floatPieces()},floatPieces:function(){$("#left_sub");var a=$("#right_sub"),b=a.find(".rightPiece"),c=a.height()-b.height();c=c<b.height()?200:c;var d=$(document).scrollTop();d>c?(b.addClass("coffixed"),b.css("left",function(){return $(window).width()<=750?750-$(document).scrollLeft():($(window).width()-980)/2+750})):b.removeClass("coffixed")},loadOnePerson:function(a){var b=this;a=a||window.event;var c=$(a.target||a.srcElement),d=c.attr("data-id"),e=c.attr("data-type"),f=this.dynamicPeople[d];if(!f){f=new g({loading:!0}),this.dynamicPeople[d]=f;var h=c.parents(".d_name:first");this.ajaxGetPerson(f,{uid:d,type:e,container:h,callback:function(){k.isShow()&&b.showPersonCard(h,f.attributes)}})}this.showPersonCard(c.parents(".d_name:first"),f.attributes)},ajaxGetPerson:function(a,b){var c={buddyId:b.uid,type:b.type};$.ajax({type:"POST",url:d.url.person,dataType:"json",data:c,success:function(d){if(200==d.returnCode){var e=d.data;$.extend(e,c),a.set(a.parse(d.data)),b.callback&&b.callback()}else seajs.log(d)},error:function(){seajs.log("location get failed.")}})},showPersonCard:function(a,b){var c={div:{top:20,left:-150},i:{top:-6,left:160}};k.showPersonCard(a,b,c)},hideCard:function(){k.hidePersonCard()},clearRecruit:function(){},setSearchText:function(a){a?($(".search_end .job").text(a),$(".search_end .result").show(),$(".bottomload").hide(),$(".bottomload .loading").text("加载中...").append($("<span>"))):($(".search_end .job").text("抱歉，没有找到 '"+jobCollection.keyWords+"' 相关结果!"),$(".search_end .result").hide())},jobFunnyTest:function(){$("body").append(m["job-funnytest"].call(_))},closeTestDiv:function(){var a=this;$(".newpopbox").fadeOut(300,function(){$(".photo_mask").hide(),$(".newpopbox").remove(),a.initDataFromServer()})}});c.exports=n}),define("job/src/1.0.0/common/util",[],function(a,b,c){var d="/contacts/job/",e={getAjaxCommonParam:function(){var a={};return a},collectionInstanceIndex:0,getCollectionInstanceIndex:function(){return this.collectionInstanceIndex++},url:{testfeed:"http://x.fx-dev.com/careertest/sendTestFeed",questionlist:"http://x.fx-dev.com/careertest/questionlist",saveTag:d+"multAddInterestPosition",person:d+"personalInfoCard",jobInfo:d+"jobRecommend",industryInfo:d+"jobNews",recommendJobInfo:d+"getJobRecommender",recommendIndustry:d+"newInfoByKey",jobSearch:d+"jobSearch",jobEvent:d+"jobEvent($userId)",workInfo:d+"isPersonalInfoCompleted",industryTag:d+"getAllNewsTag",myIndustryTag:d+"updateInterestNewsTag",editWorkInfo:d+"updatePersonalInfo",province:d+"getProvince",city:d+"getCityListBypro",addFriend:d+"addBuddy",sendMessage:"/messages/charttoprivacy",addBrowser:d+"addViewNewsUser",getBrowser:d+"getViewNewsUser"},createPop:function(a,b,c){c=c?c:"temp-popup",$("body").append($("<div class="+c+">"+b+"</div>")),setTimeout(function(){$("."+c).animate({height:0},function(){$("."+c).remove()})},a)},subtituteSpecChar:function(a){var b=/</g,c=String(a).replace(b,"&lt");return b=/>/g,c=String(c).replace(b,"&gt")},addSpliteMoreSign:function(a){if(a.length>200){var b=a.substr(0,200),c=b+"$splite&"+a.substr(200,a.length-1);return c}return a},subContent:function(a,b){var c=a.val(),d=/[^\s]+/.test(c);if(d&&c.length>b){var e=c.substr(0,b);seajs.log("substr===="+e),a.val(e),this.createPop(2e3,"最多输入"+b+"字","temp-popup")}return c},subUrlString:function(a){var b="((file|gopher|news|nntp|telnet|http|ftp|https|ftps|sftp)://)?((([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})*(\\.com|\\.edu|\\.gov|\\.int|\\.mil|\\.net|\\.org|\\.biz|\\.info|\\.pro|\\.name|\\.museum|\\.coop|\\.aero|\\.xxx|\\.idv|\\.au|\\.mo|\\.ru|\\.fr|\\.ph|\\.kr|\\.ca|\\.kh|\\.la|\\.my|\\.mm|\\.jp|\\.tw|\\.th|\\.hk|\\.sg|\\.it|\\.in|\\.id|\\.uk|\\.vn|\\.cn)))|(((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]\\d)|\\d)(\\.((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]\\d)|\\d)){3}))(:((6[0-5][0-5][0-3][0-5])|([1-5][0-9][0-9][0-9][0-9])|([0-9]{1,4})))?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?",c=new RegExp(b,"gi"),d=a.match(c);if(d)for(var e=0;e<d.length;e++)a=a.replace(c,"<a class='urlstring'>"+d[e]+"</a>");return a},filterContentExpression:function(a){if(!a)return"";var b={"[/微笑]":"new_expression_frame_001.png","[/大笑]":"new_expression_frame_002.png","[/Hold]":"new_expression_frame_070.png","[/足球]":"new_expression_frame_071.png","[/骷髅]":"new_expression_frame_076.png"},c=/\[\/[\u4e00-\u9fa5]{1,4}]|\[\/Hold]/gim,d=a.match(c);if(d)for(var e=0;e<d.length;e++)b[d[e]]&&(a=a.replace(d[e],'<img title="" src="images/new_expression/'+b[d[e]]+'"  class="face-size" />'));return a},confirm:function(a,b,c){var d='<div class="delete-broadcast-popup"><div class="mask-layer"></div><div class="alert-container"><div class="alert-main-con"><div class="confirm-text">'+b+"</div>"+'<div class="confirm-button">'+'<span class="confirm-ok">确定</span>'+'<span class="confirm-cancel">取消</span>'+"</div>"+"</div>"+"</div>"+"</div>";$("#alert-dialog").html(d),$("#alert-dialog .confirm-ok").on("click",function(){c.OK&&c.OK(),$("#alert-dialog").hide()}),$("#alert-dialog .confirm-cancel").on("click",function(){c.CANCEL&&c.CANCEL(),$("#alert-dialog").hide()}),$("#alert-dialog").show()},tagStart:["a","b","c"],lastNum:void 0,randomPrefix:function(a){var b=a?a:e.lastNum,c=e.randomNum(e.tagStart.length,b);return e.lastNum=c,e.tagStart[c]+"_"},randomNum:function(a,b){var c=Math.floor(Math.random()*a);return void 0!=b&&c==b&&(c=e.randomNum(a,b)),c},provinces:[],getProvinces:function(){return e.provinces.length||$.ajax({url:e.url.province,type:"POST",async:!1,dataType:"json",data:{},success:function(a){e.provinces=a},error:function(){seajs.log("JobInfo get more data from server failed")}}),e.provinces},getByteLength:function(a){for(var b=0,c=0;c<a.length;c++)b+=null!=a.charAt(c).match(/[^\x00-\xff]/gi)?2:1;return b},restoreScroll:function(a){a.container?$(a.container).animate({scrollTop:a.scrollHeight}):document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop=a.scrollHeight:$(document.body).animate({scrollTop:a.scrollHeight})},bigCities:[1,2,3,4,33,34],isBigCites:function(a){for(var b in this.bigCities)if(this.bigCities[b]==a)return!0;return!1},jobs:["销售经理/主管","销售代表","销售助理","销售支持","电话销售","渠道专员","汽车销售","医疗器械销售","网络销售","销售总监","医药代表","区域销售","渠道经理/总监","客户经理/主管","大客户经理","团购业务员/经理","会籍顾问","客服经理/主管","客服专员/助理","客户关系管理","电话客服","售前/售后服务","客服总监","销售经理/主管","销售代表","销售助理","销售支持","电话销售","渠道专员","汽车销售","医疗器械销售","网络销售","销售总监","医药代表","区域销售","渠道经理/总监","客户经理/主管","大客户经理","团购业务员/经理","会籍顾问","客服经理/主管","客服专员/助理","客户关系管理","电话客服","售前/售后服务","客服总监","市场专员/助理","市场拓展","市场调研","市场策划","媒介专员/助理","会务会展专员/经理","市场经理/总监","品牌专员/经理","媒介经理/主管","公关专员/助理","公关经理/主管","企划经理/主管","人事专员/助理","薪酬/绩效/员工关系","前台/总机/接待","文员","人事经理/主管","经理助理/秘书","后勤","猎头顾问","行政专员/助理","行政经理/主管","人事总监","行政总监","培训专员/助理","培训经理/主管","招聘专员/助理","招聘经理/主管","财务总监","会计/会计师","审计专员/助理","出纳","税务专员/助理","统计员","财务经理/主管","财务/会计助理","审计经理/主管","税务经理/主管","财务分析员","成本管理员","律师/法律顾问","法务专员/主管","产权/专利顾问","合规管理","律师助理","法务经理/主管（关）","物流经理/主管","物流专员/助理","仓库管理员","快递员","调度员","供应链管理","单证员","装卸/搬运工","物流总监","仓库经理/主管","国际货运","技术总监/经理","硬件工程师","软件工程师","数据库管理/DBA","网页设计/制作","技术支持/维护","系统架构师","语音/视频/图形","产品经理/专员","网站编辑","网络管理员","测试工程师","通信技术工程师","质量工程师","游戏设计/开发","网站运营","网络与信息安全工程师","项目经理/主管","程序员","技术专员/助理","网站策划","实施工程师","保险经纪人","保险精算师","保险客户经理","保险项目经理","保险顾问","车险专员","保险内勤","保险客服","保险培训师","储备经理人","保险其他职位","外贸经理/主管","外贸专员/助理","报关员","商务专员/经理","采购经理/总监","采购员","业务跟单（关）","采购助理","买手","建筑工程师/总工","土木/土建工程师","道路桥梁技术","给排水/制冷/暖通","园林/景观设计","测绘/测量","造价师/预算师","工程项目管理","工程监理","幕墙工程师","安防工程师","安全管理/安全员","资料员","市政工程师","综合布线/弱电","餐饮管理","大堂经理/领班","迎宾/接待","服务员","传菜员","厨师/厨师长","面点师","洗碗工","后厨","配菜/打荷","茶艺师","送餐员","学徒","杂工","咖啡师","预订员","综合维修工","普工","电工","钳工","切割/焊工","钣金工","车工/铣工","缝纫工","锅炉工","制冷/水暖工","铲车/叉车工","铸造/注塑/模具工","木工","油漆工","操作工","包装工","电梯工","手机维修","水泥工","钢筋工","管道工","瓦工","组装工","样衣工","染工","纺织工","印花工","压熨工","广告创意","广告文案","广告设计/制作","咨询顾问","创意指导/总监","会展策划/设计","咨询经理/主管","客户主管/专员","企业策划","媒介策划/管理","婚礼策划师","医疗管理","医生","美容整形师","心理医生","营养师","药剂师","护士/护理","宠物护理/兽医","验光师","护理主任/护士长","理疗师","医药质检","保健医生","导医","电子/电气工程师","电路工程师/技术员","自动化工程师","无线电工程师","测试/可靠性工程师","产品工艺/规划工程师","音频/视频工程师","灯光/照明设计工程师","研发工程师","电子/电器维修","汽车/摩托车修理","4S店管理","汽车美容","汽车设计工程师","装配工艺工程师","汽车机械工程师","汽车电子工程师","汽车检验/检测","二手车评估师","发动机/总装工程师","安全性能工程师","理赔专员/顾问","洗车工","停车管理员","加油站工作员","轮胎工","影视/后期制作","主持人","摄影师/摄像师","音效师","礼仪/迎宾","调酒师","酒吧服务员","配音员","放映员","娱乐厅服务员","灯光师","总编/副总编/主编","编辑/撰稿","出版/发行","排版设计/制作","装订/烫金","记者/采编","印刷操作","教师/助教","教学/教务管理","幼教","培训师/讲师","学术研究/科研","家教","教育产品开发","培训策划","培训助理","招生/课程顾问","校长","野外拓展训练师","其他职位","商务司机","出租车司机","班车司机","货运司机","特种车司机","客运司机","驾校教练/陪练","公交/地铁司机（关闭）","保洁","保姆","月嫂","育婴师/保育员","洗衣工","保安","钟点工","护工","送水工","发型师","美容师","化妆师","洗头工","美发助理/学徒","美甲师","美容店长","美容/瘦身顾问","美容助理/学徒","宠物美容","彩妆培训师","美容导师","美体师","收银员","促销/导购员","店员/营业员","店长/卖场经理","理货员/陈列员","防损员/内保","招商经理/主管","奢侈品业务","品类管理","食品加工/处理","督导","CEO/总裁/总经理","首席运营官COO","首席财务官CFO","首席技术官CTO","副总裁/副总经理","总裁助理/总经理助理","总监","分公司经理","合伙人","证券经理/总监","银行经理/主任","银行会计/柜员","信贷管理/资信评估","外汇/基金/国债经理人","融资经理/总监","风险管理/控制","证券/期货/外汇经纪人","投资/理财顾问","证券分析/金融研究","信用卡/银行卡业务","资产评估","担保/拍卖/典当","拍卖师","融资专员","股票交易员","法语翻译","德语翻译","英语翻译","日语翻译","韩语翻译","俄语翻译","小语种翻译","西班牙语翻译","意大利语翻译","葡萄牙语翻译","阿拉伯语翻译","污水处理工程师","环境工程技术","环境管理/保护","环保技术","EHS管理","环保工程师","环保检测","水质检测员","环境绿化","饲料业务","养殖人员","农艺师","畜牧师","场长","养殖部主管","动物营养/饲料研发","服装设计师","服装打样/制版","生产管理","样衣工","食品/饮料研发/检验","板房/底格出格师","电脑放码员","纸样师/车板工","纺织品设计师","质量管理/测试经理","质量检验员/测试员","测试工程师","安全消防","认证工程师/审核员","安全管理","网店店长","淘宝客服","淘宝美工","店铺文案编辑","店铺推广","活动策划","物业维修","物业管理员","物业经理/主管","合同管理","招商经理/主管","房产开发/策划","房产经纪人","置业顾问","房产店长/经理","房产店员/助理","房产客服","房产内勤","房产评估师","其他房产职位","导游","旅游顾问","行李员","救生员","签证专员","酒店前台","客房服务员","楼面经理","酒店管理","订票员","计调","总工程师/副总工程师","技术工程师","设备管理维护","工艺设计","车间主任","生产计划","化验/检验","厂长/副厂长","质量管理","生产总监","生产主管/组长","维修工程师","工业工程师","材料工程师","工艺/珠宝设计","多媒体/动画设计","平面设计","店面/陈列/展览设计","家具/家居用品设计","服装设计","装修装潢设计","美编/美术设计","美术指导","产品/包装设计","CAD设计/制图","医疗器械研发/维修","医药研发/生产/注册","临床研究/协调","生物工程/生物制药","机电工程师","仪器/仪表/计量","版图设计工程师","机械工程师","研发工程师","测试/可靠性工程师","按摩师","足疗师","针灸推拿","搓澡工","健身教练","瑜伽教练","舞蹈老师","游泳教练","台球教练","高尔夫球助理"]};c.exports=e}),define("job/src/1.0.0/collections/job-info-collection",["job/src/1.0.0/models/job-info-model","job/src/1.0.0/common/util","job/src/1.0.0/views/job-info-view","job/src/1.0.0/templates/templates_module","job/src/1.0.0/collections/contact-collection","job/src/1.0.0/models/contact-model","job/src/1.0.0/views/contact-view","job/src/1.0.0/views/person-card-view","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/browser-view","job/src/1.0.0/common/antiXSS","job/src/1.0.0/models/switch-model","job/src/1.0.0/views/switch-view","job/src/1.0.0/models/industry-info-model","job/src/1.0.0/views/industry-info-view","job/src/1.0.0/routers/subscribe_and_publish"],function(a,b,c){var d=a("job/src/1.0.0/models/job-info-model"),e=a("job/src/1.0.0/views/job-info-view"),f=a("job/src/1.0.0/models/industry-info-model"),g=a("job/src/1.0.0/views/industry-info-view"),h=a("job/src/1.0.0/routers/subscribe_and_publish"),i=a("job/src/1.0.0/common/antiXSS"),j=a("job/src/1.0.0/common/util"),k=Backbone.Collection.extend({model:d,url:"",name:"JobInfoCollection",key:"",keyWords:"",type:1,viewContainer:null,offset:0,loadStatus:!1,initialize:function(a,b){_.bindAll(this,"addJobInfo");var c=this;c.viewContainer=b.viewContainer,c.url=b.url,c.type=b.type,c.key=c.name+j.getCollectionInstanceIndex(),this.on("add",this.addOneJobInfo,this),this.on("reset",this.addAllJobInfo,this)},parse:function(a){var b=/("broadid":)(\d+)/g,c=String(a).replace(b,'$1"$2"'),d=/("id":)(\d+)/g;return c=c.replace(d,'$1"$2"'),c=i.filterHTMLTag(c),$.parseJSON(c)},populate:function(a,b){var c=a.data;if(c){for(var e=[],g=0;g<c.length;g++){var h;switch(this.type){case 1:h=new d;break;case 2:h=new f}h=h.set(h.parse(c[g])),e.push(h)}if(b){if(2==this.type&&!e.length)return appView.setSearchText(),void 0;this.reset(e)}else this.set(e,{remove:!1})}},initData:function(){var a=this;a.getData({offset:0},!0)},getMoreData:function(){var a={offset:this.offset};this.loadStatus||(buriedPoint(35506022),this.loadStatus=!0,this.getData(a))},getData:function(a,b){var c=this;$.extend(a,j.getAjaxCommonParam()),$.ajax({url:c.url,type:"POST",dataType:"text text text",data:a,success:function(a){var d=c.parse(a);200==d.returnCode?(c.populate(d,b),c.offset=d.os||c.offset,h.publish("loading_jobCollection",d)):seajs.log(a),c.loadStatus=!1},error:function(){seajs.log("JobInfo get more data from server failed"),h.publish("MESSAGES_XMLHTTPREQUESTDONE_"+c.key)}})},addAllJobInfo:function(){this.viewContainer.html(""),this.length&&this.each(this.addJobInfo)},addOneJobInfo:function(a){this.addJobInfo(a)},addJobInfo:function(a){var b;1==this.type?b=new e({model:a}):2==this.type&&(b=new g({model:a})),b.render(this.viewContainer)}});c.exports=k}),define("job/src/1.0.0/models/job-info-model",["job/src/1.0.0/common/util"],function(a,b,c){a("job/src/1.0.0/common/util"),c.exports=Backbone.Model.extend({defaults:{sequence:0,jobInfoId:1,source:2,companyName:3,industry:4,companyAddress:5,linkman:6,tel:7,positionName:8,publishDate:9,expireDate:10,salaryRange:11,location:12,experience:13,education:14,jobType:15,welfare:16,description:17,requirements:18,count:19,type:1,url:""},parse:function(a){return a}})}),define("job/src/1.0.0/views/job-info-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/collections/contact-collection","job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/views/contact-view","job/src/1.0.0/views/person-card-view","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/browser-view","job/src/1.0.0/common/antiXSS","job/src/1.0.0/models/switch-model","job/src/1.0.0/views/switch-view"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/collections/contact-collection"),f=a("job/src/1.0.0/models/switch-model"),g=a("job/src/1.0.0/views/switch-view"),h=a("job/src/1.0.0/common/util"),i=Backbone.View.extend({tagName:"div",className:"jobmessage mb15",templateId:"job-feed-tpl",events:{"click .j_expand":"showContent","click .j_open":"hideContent"},initialize:function(){},render:function(){var a=this;this.$el.html(d.template(this.templateId,this.model.toJSON())),this.model.collection.viewContainer.append(this.$el);var b=new e([],{jobId:this.model.get("jobInfoId"),recommendType:1,companyName:this.model.get("companyName"),viewContainer:this.$("#recommend-company .ta_list ul")});b.on("reset",function(){a.showSwitcher(b.recommendType,b.length)},b),this.actHeight=this.$(".j_details").height(),this.actHeight>95?(this.$(".j_details").height(90),this.$(".j_details").css("overflow","hidden"),this.$(".msg").hide()):this.$(".f_btn").remove()},showSwitcher:function(a,b){if(b){var c=this,d="recommend-company";a&&$(".c_title em").html("&nbsp;<span>相关职位</span>"),c.$("#"+d).parent().show(),c.$(".f_foot").fadeIn();var e=c.$("#"+d+" ul.com_wrap");if(b>2){b=Math.ceil(b/2);var h=new f({count:b}),i=new g({model:h});c.$("#"+d+" .j_switch").show(),c.$("#"+d+" .j_switch").html(i.render()),this.listenTo(i,"pageChanged",function(a){var b=-16+528*-a.current;e.animate({marginLeft:b})})}}},showContent:function(){window.buriedPoint(35506013),this.$(".j_expand").toggle(),this.$(".j_open").toggle(),this.$(".j_details").animate({height:this.actHeight})},hideContent:function(){buriedPoint(35506014),this.$(".j_details").animate({height:90}),h.restoreScroll({scrollHeight:$(document).scrollTop()-this.actHeight+90}),this.$(".j_expand").toggle(),this.$(".j_open").toggle()}});c.exports=i}),define("job/src/1.0.0/templates/templates_module",[],function(a,b,c){var d=a("job/src/1.0.0/templates/templates.html");_.templateSettings={interpolate:/\{\{=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g};var e={};$(d).filter("script").each(function(){var a=$(this);e[this.id]=_.template(a.html())});var f={template:function(a,b){return b=b||{},e[a](b)}};c.exports=f}),define("job/src/1.0.0/templates/templates.html",[],'<!-- 搜索 -->\n<script type="text/template" id="search-job-tpl">\n    <input type="text" class="jobtxt" placeholder="搜索职位">\n    <a href="javascript:void(0)" class="jobbut" title="日志"></a>\n    <div class="job_list" style="top: 44px; left:-1px; width: 228px;"></div>\n</script>\n\n<!-- job-feed-template -->\n<script type="text/template" id="job-feed-tpl">\n    <div class="job_tit">\n        <h3><em>{{=positionName}}</em></h3>\n    </div>\n    <div class="job_con">\n        <div class="j_address">\n            <span class="j_at"><em></em>{{=companyName}}</span><i>|</i><span class="j_ad">{{=location}}</span>\n        </div>\n        <div class="j_details">\n            {{ if(description){ }}\n            <div class="explain">\n                <h5>职位描述：</h5>\n                <pre>{{=description}}</pre>\n            </div>\n            {{ } }}\n            {{ if(requirements){ }}\n            <div class="explain">\n                <h5>任职要求：</h5>\n                <pre>{{=requirements}}</pre>\n            </div>\n            {{ } }}\n            <div class="j_source clr">\n                <h5>来源：</h5>\n                {{ if(url){ }}\n                <a href="{{=url}}"><span>{{=source}}</span></a>\n                {{ }else{ }}\n                <span>{{=source}}</span>\n                {{ } }}\n            </div>\n        </div>\n        <div class="tra_btn">\n            <span class="j_expand">展开详情<i></i></span>\n            <span class="j_open" style="display:none;">收起<i></i></span>\n        </div>\n\n    </div>\n    <div class="job_foot2" style="display:none;">\n        <div id="recommend-company" class="f_content" style="z-index: 2;">\n            <div class="ta_top">\n                <h4 class="c_title">Ta们可以帮你引荐<em>到&nbsp;<span>这家公司</span></em> &nbsp;<strong>：</strong></h4>\n            </div>\n            <div class="job_main">\n                <div class="ta_list">\n                    <ul class="com_wrap">\n\n                    </ul>\n                </div>\n            </div>\n            <div class="j_switch" style="display:none;">\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- industry-feed-template -->\n<script type="text/template" id="industry-feed-tpl">\n    <div class="tra_con">\n        <h3>{{=title}}</h3>\n        <div class="explain">\n            <pre class="desc">{{=content}}</pre>\n        </div>\n        <div class="j_source clr">\n            <h5>来源：</h5>\n            {{ if(url){ }}\n            <a href="{{=url}}"><span>{{=source}}</span></a>\n            {{ }else{ }}\n            <span>{{=source}}</span>\n            {{ } }}\n        </div>\n        <div class="tra_btn">\n            <span class="j_expand">展开详情<i></i></span>\n            <span class="j_open" style="display:none;">收起<i></i></span>\n        </div>\n    </div>\n    {{if(tags && tags.length){ }}\n    <div class="tra_tag">\n        <i></i>\n        {{ for(var i=0; i < tags.length; i++){ }}\n        <span>{{=tags[i] }}</span>\n        {{ } }}\n    </div>\n    {{ } }}\n\n    <div id="recommend-browser" class="record clr" style="display:none;">\n        <div class="record_num"><span>Ta</span>们看过这条资讯</div>\n        <div class="record_user">\n            <ul class="user_wrap">\n\n            </ul>\n        </div>\n        <div class="j_switch">\n        </div>\n    </div>\n</script>\n\n<!-- 资讯浏览记录 -->\n<script type="text/template" id="recommend-browser-tpl">\n    <div class="user-flag">\n        <div class="user_pic">\n            <a href="javascript:void(0)"><img src="{{=portraitMiddle}}" onerror="this.src=\'{{=__resourceDomain}}/img/public/head180.jpg\'"></a>\n        </div>\n    </div>\n</script>\n\n<!-- 左右切换 -->\n<script type="text/template" id="c-switch-tpl">\n    <span class="j_c_l"></span>\n    <ul class="j_c_con clr">\n        {{ for(var i = 0; i < count; i++){ }}\n        {{ if(i==currentIdx){ }}\n        <li class="act" idx="{{=i}}"></li>\n        {{ } else { }}\n        <li idx="{{=i}}"></li>\n        {{ } }}\n        {{ } }}\n    </ul>\n    <span class="j_c_r jr_on"></span>\n</script>\n\n<!-- 推荐人列表项 -->\n<script type="text/template" id="recommend-person-tpl">\n    <div class="user-flag ta_con clr">\n        <div class="ta_con_l">\n            <a href="javascript:void(0)" class="ta_pic"><img src="{{=portraitMiddle}}" onerror="this.src=\'{{=__resourceDomain}}/img/public/head180.jpg\'"/>\n                <i class="p_bbg1"></i>\n            </a>\n            <a href="javascript:void(0)" class="touch">\n                {{ if(type==1){ }}联系Ta {{ }else{ }}加好友{{ } }}\n            </a>\n        </div>\n        <div class="ta_con_r">\n            <a href="javascript:void(0)" class="name" title="{{=showName}}">{{=showName}}</a>\n\n            <p class="data">\n                {{ if(company){ }}\n                <span class="con_tab" title="{{=company}}">\n                    <i class="con_ico"></i>{{=company}}\n                </span>\n                {{ } }}\n                {{ if(position){ }}\n                <span class="con_tab" title="{{=position}}">\n                    <i class="job_ico"></i>{{=position}}\n                </span>\n                {{ } }}\n            </p>\n            <!--{{ if(type==2){ }}-->\n            <!--<span class="p_msg"><span>{{=friendsCount}}</span>位认识Ta</span>-->\n            <!--{{ } }}-->\n        </div>\n        <div class="{{=friendClass}}"></div>\n    </div>\n</script>\n\n<!-- 推荐人卡片 -->\n<script type="text/template" id="person-card-tpl">\n    <i class="j_arrow" style="position: absolute; top:-6px; left: 44px;"></i>\n    {{ if(loading){ }}\n    <div class="j_pop_load"></div>\n    {{ } else { }}\n    <div class="{{=friendClass}}"></div>\n    <div class="pop_top clr">\n        <div class="p_l">\n            <span href="javascript:void(0)" class="p_pic" title="{{=showName}}"><img src="{{=portraitMiddle}}" onerror="this.src=\'{{=__resourceDomain}}/img/public/head180.jpg\'"/>\n                <i class="f_bg150"></i>\n            </span>\n            {{ if (type != 8) { }}\n            <a href="javascript:void(0)" class="add_f">\n                {{ if(type==1){ }}联系Ta {{ }else{ }}加好友{{ } }}\n            </a>\n            {{ } }}\n        </div>\n        <div class="p_r">\n            <span class="name" title="{{=showName}}">{{=showName}}</span>\n\n            <div class="P_r_con">\n                {{ if(sid){ }}\n                <span><i class="n_1"></i>{{=sid}}</span>\n                {{ } }}\n                <!--{{ if(mobileNo){ }}-->\n                <!--<span><i class="n_2"></i>{{=mobileNo}}</span>-->\n                <!--{{ } }}-->\n                {{ if(company){ }}\n                <span title="{{=company}}"><i class="n_3"></i>{{=company}}</span>\n                {{ } }}\n                {{ if(position){ }}\n                <span title="{{=position}}"><i class="n_4"></i>{{=position}}</span>\n                {{ } }}\n            </div>\n\n        </div>\n    </div>\n\n    <div class="pop_bot"></div>\n    {{ } }}\n</script>\n\n<!-- 标签 -->\n<script type="text/template" id="tag-tpl">\n<ul>\n    {{ for(var i=0; i < tags.length; i++){ }}\n    <li>\n        <a href="#" class="a1_l a_on"><span class="a1_r">{{=tags[i].text}}</span></a><i class="del" style="display:none;"></i>\n    </li>\n    {{ } }}\n</ul>\n</script>\n\n<!--感兴趣的职位推荐标签-->\n<script type="text/template" id="recommendations-tag-tpl">\n    {{ for(var i=0; i < positionTags.length; i++){ }}\n    {{ if(_.contains(tags,positionTags[i])){ }}\n    <li>\n        <a href="javascript:void(0)" class="a1_l b_on"><span class="a1_r">{{=positionTags[i]}}</span></a>\n    </li>\n    {{ }else{ }}\n    <li>\n        <a href="javascript:void(0)" class="a1_l"><span class="a1_r">{{=positionTags[i]}}</span></a>\n    </li>\n    {{ } }}\n    {{ } }}\n</script>\n\n<!-- 编辑职位标签 -->\n<script type="text/template" id="tag-edit-tpl">\n    <div class="j_edit">\n        {{ if(!tags.length){ }}\n            <div class="j_tit clr"><span>添加感兴趣的职位</span></div>\n        {{ }else{ }}\n            <div class="j_tit clr" style="display:none;"><span>添加感兴趣的职位</span></div>\n        {{ } }}\n        {{ if(tags){ }}\n            <div class="j_show clr">\n                <div></div>\n            </div>\n        {{ }else{ }}\n            <div class="j_show clr" style="display:none;">\n                <div></div>\n            </div>\n        {{ } }}\n        <div class="j_add clr" style="display:none;">\n            <div class="j_i">\n                <input id="addTagText" type="text" placeholder="输入感兴趣的职位" class="a_i_t"><a class="aj_btn" href="javascript:void(0)">添加</a>\n            </div>\n            <ul id="recommendations-tag">\n            </ul>\n        </div>\n        <a class="e_btn" href="javascript:void(0)">编辑</a>\n        <div class="e_btn" style="display:none;"><a class="e_sure" href="javascript:void(0)">确定</a>&nbsp;&nbsp;<a class="e_cancel" href="javascript:void(0)">取消</a></div>\n    </div>\n</script>\n\n<!-- 资讯标签 -->\n<script type="text/template" id="industry-tag-edit-tpl">\n        <div class="j_tit clr"><span>选择感兴趣的标签</span></div>\n        <div class="i_show clr">\n            <ul>\n                {{ for(var i=0; i < tags.length; i++){ }}\n                <li>\n                    {{ if(tags[i].state){ }}\n                    <a href="javascript:void(0);" class="a1_l a_on"><span class="a1_r">{{=tags[i].txt}}</span></a>\n                    {{ }else{ }}\n                    <a href="javascript:void(0);" class="a1_l"><span class="a1_r">{{=tags[i].txt}}</span></a>\n                    {{ } }}\n                </li>\n                {{ } }}\n            </ul>\n        </div>\n</script>\n\n<!-- 我的工作信息 -->\n<script type="text/template" id="my-job-tpl">\n    <h3 class="mj_title">我的工作{{ if(!hasNoJob){ }}<a class="d_edit" href="#">编辑</a>{{ } }}</h3>\n    <!--未填状态-->\n    {{ if(hasNoJob){ }}\n    <div class="unfilled clr">\n        <div class="u_l"></div>\n        <div class="u_r">\n            <span>完善工作信息&gt;&gt;</span>\n            <p>可获得更多职位推荐！</p>\n        </div>\n    </div>\n    {{ } }}\n    <!--未填状态 end-->\n    <!--编辑状态-->\n    <div class="filled clr" style="display:none;">\n        <div class="fill_i"><input id="myJob" type="text" placeholder="请输入职位名称" value="{{=position}}" class="d_i_t"></div>\n        <div class="fill_i"><input id="myCompany" type="text" placeholder="请输入公司名称" value="{{=company}}" class="d_i_t"></div>\n        <ul class="clr">\n            <li class="f_d_l fd_r">\n                <select class="fd_i" id="province"></select>\n            </li>\n            <li class="f_d_l">\n                <select class="fd_i" id="city"></select>\n            </li>\n        </ul>\n        <div class="f_button clr">\n            <span class="s_btn s_confirm fd_r">确定</span><span class="s_btn s_cancel">取消</span>\n        </div>\n    </div>\n    <!--编辑状态 end-->\n    <!--展示状态-->\n    {{ if(!hasNoJob){ }}\n    <div class="m_show">\n        <span><i class="m_s1"></i>职位：\n            {{ if(position){ }}\n            <em title="{{=position}}">{{=position}}</em>\n            {{ } else { }}\n            <em class="m_msg">未填写职位</em>\n            {{ } }}\n        </span>\n        <span><i class="m_s2"></i>公司：\n            {{ if(company){ }}\n                <em title="{{=company}}">{{=company}}</em>\n            {{ } else { }}\n                <em class="m_msg">未填写公司</em>\n            {{ } }}\n\n        </span>\n        <span><i class="m_s3"></i>城市：\n            {{ if(city){ }}\n            <em>{{=city}}</em>\n            {{ } else { }}\n             <em class="m_msg">未填写所在地</em>\n            {{ } }}\n        </span>\n    </div>\n    {{ } }}\n    <!--展示状态 end-->\n</script>\n\n<!-- 我关注的招聘 -->\n<script type="text/template" id="my-follow-tpl">\n    <a href="{{= url }}" target="_blank">\n        <em title="{{=company }}">\n            {{ if(company.length>6){ }}\n            {{=company.slice(0,6) }}\n            {{ } else { }}\n            {{=company }}\n            {{ } }}\n        </em>\n        <span> 招聘 </span>\n        <em title="{{=job }}">\n            {{ if(job.length>6){ }}\n            {{=job.slice(0,6) }}\n            {{ } else { }}\n            {{=job }}\n            {{ } }}\n        </em>\n    </a>\n</script>\n\n<!-- 对话框 -->\n<script type="text/template" id="dialog-tpl">\n    <div class="{{=size}} popup confirmation" style="position: fixed; z-index: 1001; left: 488px; top: 198px;">\n        <div class="bbox">\n            {{ if(title){ }}\n            <div class="ttop"><span>{{=title}}</span></div>\n            {{ } }}\n            <div class="themain"><p>{{=content}}</p>\n                {{ if(buttons){ }}\n                <div class="btnx rept">\n                    {{ if(buttons[\'OK\']){ }}\n                    <a href="javascript:void(0);" class="btn btnb" id="dialogOk">确定</a>\n                    {{ } }}\n                    {{ if(buttons[\'CANCEL\']){ }}\n                    <a href="javascript:void(0);" class="btn btng2" id="dialogCancel">取消</a>\n                    {{ } }}\n                </div>\n                {{ } }}\n            </div>\n        </div>\n    </div>\n    {{ if(modalDialog){ }}\n    <div class="photo_mask" style="z-index: 1000"></div>\n    {{ } }}\n</script>\n\n<!-- 发消息-->\n<script type="text/template" id="send-msg-tp1">\n    <div class="popupc phone clr">\n        <div class="box_t"><h3>发消息</h3></div>\n        <div class="box ">\n            <label class="t">好友：</label>\n\n            <div class="fribox clr">\n                <span id="{{=userid}}">{{=showName}}</span>\n            </div>\n        </div>\n        <div class="box txtbox">\n            <!--<p class="frinum"><span id="friendtip"></span></p>-->\n            <label class="t">内容：</label>\n\n            <p class="sendtxt">\n                <textarea name="" rows="" id="summary" cols=""></textarea>\n            </p>\n\n            <p class=""><span class="txtnum" id="summarytips"></span></p>\n        </div>\n        <div class="btnx">\n            <a href="javascript:void(0)" id="send" class="btn btn2b">发送</a>\n            <a href="javascript:void(0)" id="close" class="btn btng">取消</a>\n        </div>\n        <a id="popupClose" href="javascript:void(0);" class="ico m_close"></a>\n    </div>\n</script>\n\n<!-- 进入测试弹层 -->\n<script type="text/template" id="job-funnytest">\n    <div class="newpopbox"\n         style="width:507px; position:absolute; left:50%; top:235px; z-index:1001; margin-left:-253px;margin-top:-110px;">\n        <a href="javascript:void(0)" class="newclz"></a>\n        <h6></h6>\n\n        <div class="msg_con">\n            <div class="m_top clr">\n                <div class="m_t_l"></div>\n                <div class="m_t_r">请注意！一大波职位向你来袭。<br>\n                    快来检测一下你的跳槽成功率吧！\n                </div>\n            </div>\n            <div class="m_btn">\n                <a href="/contacts/job/sexytest" class="actico">开始</a><a href="javascript:void(0)" class="nexico">跳过</a>\n            </div>\n\n        </div>\n    </div>\n    <div class="photo_mask" style="z-index:1000"></div>\n</script>'),define("job/src/1.0.0/collections/contact-collection",["job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/views/contact-view","job/src/1.0.0/templates/templates_module","job/src/1.0.0/views/person-card-view","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/browser-view","job/src/1.0.0/common/antiXSS"],function(a,b,c){var d=a("job/src/1.0.0/models/contact-model"),e=a("job/src/1.0.0/views/contact-view"),f=a("job/src/1.0.0/views/browser-view"),g=a("job/src/1.0.0/common/antiXSS"),h=a("job/src/1.0.0/common/util"),i=Backbone.Collection.extend({model:d,url:"",name:"ContactsCollection",key:"",initialize:function(a,b){this.options=this.options||{},b=b||{},_.bindAll(this,"addContact"),this.key=this.name+h.getCollectionInstanceIndex(),$.extend(this.options,b),this.on("reset",this.resetContacts,this),this.on("add",this.addContact,this),this.initData()
},parse:function(a){var b=/("broadid":)(\d+)/g,c=String(a).replace(b,'$1"$2"'),d=/("id":)(\d+)/g;return c=c.replace(d,'$1"$2"'),c=g.filterHTMLTag(c),$.parseJSON(c)},populate:function(a,b){var c=a.data;if(c){for(var e=[],f=0;f<c.length;f++){var g=new d;g=g.set(g.parse(c[f])),g.set({idx:f}),e.push(g)}b?this.reset(e):this.set(e,{remove:!1})}},initData:function(){this.getData({},!0)},getData:function(a,b){var c=this;$.extend(a,h.getAjaxCommonParam());var d="";switch(+c.options.recommendType){case 1:d=h.url.recommendJobInfo,a.jobInfoId=c.options.jobId,a.companyName=c.options.companyName;break;case 2:d=h.url.getBrowser,a.newsId=c.options.newsID}$.ajax({url:d,type:"POST",dataType:"text text text",data:a,success:function(a){if(a){var d=c.parse(a);c.recommendType=d.dataType,200==d.returnCode?c.populate(d,b):seajs.log(a)}},error:function(){seajs.log("JobInfo get more data from server failed")}})},resetContacts:function(){seajs.log("invoked resetContacts"),this.options.viewContainer.html(""),this.length&&this.each(this.addContact)},addContact:function(a,b,c){switch(+this.options.recommendType){case 1:var d=new e({model:a});this.options.viewContainer.append(d.render());break;case 2:var g=new f({model:a});c.prepend?this.options.viewContainer.prepend(g.render()):this.options.viewContainer.append(g.render())}}});c.exports=i}),define("job/src/1.0.0/models/contact-model",["job/src/1.0.0/common/util"],function(a,b,c){a("job/src/1.0.0/common/util"),c.exports=Backbone.Model.extend({defaults:{userid:100001,nickname:"pk之王",screenname:"pk之王",portraitMiddle:"",company:"",position:"",tags:[],friendsCount:25,type:8,mobileNo:"",sid:"",friendClass:"",loading:!1,showName:"",hasNoJob:"",opt:""},parse:function(a){switch(+a.type){case 0:a.friendClass="user_3";break;case 1:a.friendClass="user_1";break;case 2:a.friendClass="user_2";break;case 3:a.friendClass="user_3";break;case 8:a.friendClass="";break;default:a.friendClass=""}return a.showName=a.screenname?a.screenname:a.nickname,a.portraitMiddle=a.portraitMiddle?__portraitDomain+a.portraitMiddle:__resourceDomain+"/img/public/head180.jpg",a.hasNoJob=!a.company&&!a.position,a.loading=!1,a.tags||(a.tags=[]),a}})}),define("job/src/1.0.0/views/contact-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/views/person-card-view","job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/message-view"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/views/person-card-view"),f=a("job/src/1.0.0/common/view-util"),g=a("job/src/1.0.0/views/message-view"),h=Backbone.View.extend({tagName:"li",templateId:"recommend-person-tpl",className:"ta_li",events:{"mouseenter .ta_pic":"showCard","mouseleave .ta_con_l":"hideCard","click .ta_con_l .touch":"contactOrAdd"},initialize:function(){},render:function(){return this.$el.html(d.template(this.templateId,this.model.toJSON())),this.$el},showCard:function(){var a;a=this.model.get("idx")%2?{div:{top:64,left:-108},i:{top:-6,left:132}}:{div:{top:64,left:-20},i:{top:-6,left:44}},e.showPersonCard(this.$(".ta_con_l"),this.model.attributes,a)},hideCard:function(){e.hidePersonCard()},contactOrAdd:function(){return 1==this.model.get("type")?(buriedPoint(35506019),g.render({userid:this.model.get("userid"),showName:this.model.get("showName")})):(buriedPoint(35506020),f.addFriend(this.model.get("userid"))),!1}});c.exports=h}),define("job/src/1.0.0/views/person-card-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/models/contact-model"),f=a("job/src/1.0.0/common/view-util"),g=a("job/src/1.0.0/views/message-view"),h=Backbone.View.extend({tagName:"div",className:"j_pop_box",attributes:{style:"z-index:990;"},model:new e,viewContainer:null,templateId:"person-card-tpl",events:{"click .p_l .add_f":"contactOrAdd"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){this.$el.html(d.template(this.templateId,this.model.toJSON())),this.model.get("tags")},showPersonCard:function(a,b,c){this.model.set(b),c&&(this.$el.css(c.div).css("position","absolute"),this.$(".j_arrow").css(c.i).css("position","absolute")),this.$el.parents(".user-flag").css({position:"",zIndex:""}),a.append(this.$el),a.parent(".user-flag").css({position:"absolute",zIndex:99}),this.$el.show()},hidePersonCard:function(a){this.$el.hide(),this.$el.css(a||{left:-50}),this.$el.parents(".user-flag").css({position:"",zIndex:""})},isShow:function(){return this.$el.is(":visible")},updateData:function(a){this.model.set(a)},contactOrAdd:function(){return 1==this.model.get("type")?(buriedPoint(35506019),g.render({userid:this.model.get("userid"),showName:this.model.get("showName")})):(buriedPoint(35506020),f.addFriend(this.model.get("userid"))),!1}});c.exports=new h}),define("job/src/1.0.0/common/view-util",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/common/util"),f=a("job/src/1.0.0/views/dialog-view"),g=a("job/src/1.0.0/models/dialog-model");a("autocompleter"),a("autocompleterStyle");var h={renderTags:function(a,b){var c=[];a=a?a:[];for(var f=0;f<a.length;f++){var g=b.needRandom?e.randomPrefix():"a_";c[f]={classPrefix:g,text:a[f]}}return d.template("tag-tpl",{myjob:b.myjob,tags:c})},bindAutoComplete:function(a){try{a.targetWrapper.show(),a.input.autocomplete({lookup:e.jobs,appendTo:a.targetWrapper,maxHeight:160,width:"100%"})}catch(b){seajs.log(b)}},addFriend:function(a){$.ajax({url:e.url.addFriend,type:"POST",async:!1,dataType:"json",data:{destUserid:a},success:function(){var a=new g({title:"成功提示",content:"申请已发出，等待对方批准",buttons:{OK:!0}}),b=new f({model:a});b.render()},error:function(){seajs.log("JobInfo get more data from server failed")}})},alert:function(a){var b=new g({content:a,duration:1500,size:"small"}),c=new f({model:b});c.render()}};c.exports=h}),define("job/src/1.0.0/views/dialog-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/models/dialog-model"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/models/dialog-model"),f=Backbone.View.extend({tagName:"div",templateId:"dialog-tpl",model:e,viewContainer:null,events:{"click #dialogOk":"OK","click #dialogCancel":"CANCEL"},initialize:function(){},render:function(){var a=this;this.viewContainer=this.model.get("targetWrapper"),this.viewContainer=this.viewContainer?this.viewContainer:$(document.body),this.$el.html(d.template(this.templateId,this.model.toJSON())),this.viewContainer.append(this.$el),this.model.get("modalDialog")&&this.viewContainer.css({overflow:"hidden"}),this.model.get("duration")&&setTimeout(function(){a.close()},this.model.get("duration"))},OK:function(){var a=this.model.get("callback");a&&a.OK&&a.OK(),this.close()},CANCEL:function(){var a=this.model.get("callback");a&&a.CANCEL&&a.CANCEL(),this.close()},close:function(){var a=this;a.model.get("modalDialog")&&(a.$(".photo_mask").fadeOut(),a.viewContainer.css({overflow:"auto"})),a.$(".confirmation").slideUp(300,function(){a.$el.remove()})}});c.exports=f}),define("job/src/1.0.0/models/dialog-model",[],function(a,b,c){c.exports=Backbone.Model.extend({defaults:{title:"",content:"",size:"medium",duration:0,modalDialog:!1,targetWrapper:void 0,buttons:{OK:!1,CANCEL:!1},callback:{OK:function(){},CANCEL:function(){}}}})}),define("job/src/1.0.0/views/message-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/common/util"),f=a("job/src/1.0.0/common/view-util"),g=Backbone.View.extend({tagName:"div",templateId:"send-msg-tp1",className:"popup",attributes:{style:"width: 505px; left: 422px; top: 166px;position:fixed;"},viewContainer:null,events:{"click #send":"OK","click #close":"CANCEL","click #popupClose":"close"},render:function(a){this.userid=a.userid,this.$el.html(d.template(this.templateId,a)),$(document.body).append(this.$el),this.$el.fadeIn(),$("#summary").focus()},OK:function(){var a=this,b=$("#summary").val();b?($.ajax({url:e.url.sendMessage,type:"POST",dataType:"json",data:{fid:a.userid,summary:b},success:function(){f.alert("已发送")},error:function(){seajs.log(" message  failed by post")}}),this.close()):($(".txtbox .sendtxt").addClass("e"),$("#summarytips").text("忘记写内容了，说点什么吧"))},CANCEL:function(){this.close()},close:function(){this.$el.fadeOut()}});c.exports=new g}),define("job/src/1.0.0/views/browser-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/views/person-card-view","job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/message-view"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/views/person-card-view"),f=a("job/src/1.0.0/common/view-util"),g=a("job/src/1.0.0/views/message-view"),h=Backbone.View.extend({tagName:"li",templateId:"recommend-browser-tpl",className:"user_li",events:{"mouseenter .user_pic":"showCard","mouseleave .user_pic":"hideCard"},initialize:function(){},render:function(){return this.$el.html(d.template(this.templateId,this.model.toJSON())),this.$el},dynamicPeople:function(){},showCard:function(a){var b=this;a=a||window.event;var c=$(a.target||a.srcElement),d={div:{top:28,left:-1},i:{top:-6,left:10}},f=b.model.attributes.userid,g=b.model.attributes.type,h=b.model.attributes.showName;if(!h&&!this.model.get("loading")){b.model.set({loading:!0});var i=b.model;window.appView.ajaxGetPerson(i,{uid:f,type:g,container:c.parents(".user_pic"),callback:function(){b.$el.find(".j_pop_box")&&e.isShow()&&(b.model.set({loading:!1}),e.showPersonCard(b.$(".user_pic"),b.model.attributes,d))}})}e.showPersonCard(b.$(".user_pic"),b.model.attributes,d)},hideCard:function(){e.hidePersonCard()},contactOrAdd:function(){return 1==this.model.get("type")?(buriedPoint(35506019),g.render({userid:this.model.get("userid"),showName:this.model.get("showName")})):(buriedPoint(35506020),f.addFriend(this.model.get("userid"))),!1}});c.exports=h}),define("job/src/1.0.0/common/antiXSS",[],function(a,b,c){!function(a){a.xssScan={scanOpenTag:function(a){var b=/</gi,c=a.replace(b,"&lt");return c},scanCloseTag:function(a){var b=/>/gi,c=a.replace(b,"&gt");return c},filterHTMLTag:function(a){return this.scanCloseTag(this.scanOpenTag(a))}}}(jQuery),c.exports=$.xssScan}),define("job/src/1.0.0/models/switch-model",[],function(a,b,c){c.exports=Backbone.Model.extend({defaults:{prevIdx:0,currentIdx:0,count:0}})}),define("job/src/1.0.0/views/switch-view",["job/src/1.0.0/templates/templates_module"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=Backbone.View.extend({tagName:"div",className:"jo_switch",templateId:"c-switch-tpl",events:{"click .j_c_l":"prevPage","click .j_c_r":"nextPage","click .j_c_con li":"clickLi"},initialize:function(){this.listenTo(this.model,"change",this.render)},render:function(){return this.$el.html(d.template(this.templateId,this.model.toJSON())),this.$el},prevPage:function(){var a=this.model.get("currentIdx");return a&&(buriedPoint(35506021),this.model.set({prevIdx:a,currentIdx:a-1}),this.changePage()),!1},nextPage:function(){buriedPoint(35506021);var a=this.model.get("currentIdx");return a<this.model.get("count")-1&&(this.model.set({prevIdx:a,currentIdx:a+1}),this.changePage()),!1},clickLi:function(a){buriedPoint(35506021);var a=a||window.event,b=+$(a.target||a.srcElement).attr("idx"),c=this.model.get("currentIdx");c!=b&&(this.model.set({prevIdx:c,currentIdx:b}),this.changePage())},changePage:function(){switch(this.trigger("pageChanged",{current:this.model.get("currentIdx")}),this.model.get("currentIdx")+1){case 1:this.$(".j_c_r").addClass("jr_on"),this.$(".j_c_l").removeClass("jl_on");break;case this.model.get("count"):this.$(".j_c_l").addClass("jl_on"),this.$(".j_c_r").removeClass("jr_on");break;default:this.$(".j_c_l").addClass("jl_on"),this.$(".j_c_r").addClass("jr_on")}}});c.exports=e}),define("job/src/1.0.0/models/industry-info-model",["job/src/1.0.0/common/util"],function(a,b,c){a("job/src/1.0.0/common/util"),c.exports=Backbone.Model.extend({defaults:{newsID:1,title:2,content:3,publicDate:"",key1:5,key2:6,key3:7,sequence:8,source:"",type:2,url:"",tags:[]},parse:function(a){return a.tags=a.key1?a.key1.split("#"):[],a}})}),define("job/src/1.0.0/views/industry-info-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/collections/contact-collection","job/src/1.0.0/models/contact-model","job/src/1.0.0/common/util","job/src/1.0.0/views/contact-view","job/src/1.0.0/views/person-card-view","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle","job/src/1.0.0/views/message-view","job/src/1.0.0/views/browser-view","job/src/1.0.0/common/antiXSS","job/src/1.0.0/models/switch-model","job/src/1.0.0/views/switch-view"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/collections/contact-collection"),f=a("job/src/1.0.0/models/switch-model"),g=a("job/src/1.0.0/models/contact-model"),h=a("job/src/1.0.0/views/switch-view"),i=a("job/src/1.0.0/common/util"),j=Backbone.View.extend({tagName:"div",className:"tradenews mb15",templateId:"industry-feed-tpl",events:{"click .j_expand":"showContent","click .j_open":"hideContent","click .j_source a":"countSourceClick","click .user_pic a":"countHeadClick"},initialize:function(){},render:function(){var a=this;this.$el.html(d.template(this.templateId,this.model.toJSON())),this.model.collection.viewContainer.append(this.$el);var b=new e([],{newsID:this.model.get("newsID"),recommendType:2,viewContainer:this.$("#recommend-browser ul.user_wrap")});b.on("reset",function(){a.showSwitcher(0,b.length)},b),a.browserViewers=b,this.actHeight=this.$(".explain").height(),this.actHeight>120?(this.$(".explain").height(120),this.$(".explain").css("overflow","hidden"),this.$(".j_source").hide()):this.$(".tra_btn").remove()},showSwitcher:function(a,b){if(b){var c=this,d="recommend-browser";c.$("#"+d).show(),c.$(".f_foot").fadeIn();var e=c.$("#"+d+" ul.user_wrap");if(b>12){b=Math.ceil(b/12);var g=new f({count:b}),i=new h({model:g});c.$("#"+d+" .j_switch").html(i.render()),this.listenTo(i,"pageChanged",function(a){var b=-10+513*-a.current;e.animate({marginLeft:b})})}}},showContent:function(){buriedPoint(35506046),this.$(".j_expand").toggle(),this.$(".j_open").toggle(),this.$(".j_source").show(),this.$(".explain").animate({height:this.actHeight}),this.markUser()},hideContent:function(){buriedPoint(35506047),this.$(".explain").animate({height:120}),this.$(".j_source").hide(),i.restoreScroll({scrollHeight:$(document).scrollTop()-this.actHeight+120}),this.$(".j_expand").toggle(),this.$(".j_open").toggle()},markUser:function(){var a=this,b=a.browserViewers.where({userid:window.PROFILE_DATA.profile.userId});if(!(b.length>0)){var c;c={newsId:this.model.get("newsID")},$.ajax({url:i.url.addBrowser,type:"POST",dataType:"json",data:c,success:function(b){if(200==b.returnCode){var c=new g,d=window.PROFILE_DATA.profile;c.set(c.parse({userid:d.userId,nickname:d.nickname,portraitMiddle:d.portraitMiddle,company:window.myJobModel.get("company"),position:window.myJobModel.get("position"),type:8,mobileNo:d.mobile,sid:d.fetionId})),a.$("#recommend-browser").show(),a.browserViewers.add(c,{prepend:!0})}else seajs.log(b)},error:function(){seajs.log("JobInfo get more data from server failed")},complete:function(){$(".aj_btn").removeAttr("disabled")}})}},countSourceClick:function(){buriedPoint(35506048)},countHeadClick:function(){buriedPoint(35506049)}});c.exports=j}),define("job/src/1.0.0/routers/subscribe_and_publish",[],function(a,b,c){var d={};!function(a){var b={},c=-1;a.publish=function(a,c){return b[a]?(setTimeout(function(){for(var d=b[a],e=d?d.length:0;e--;)d[e].func(a,c)},0),void 0):!1},a.subscribe=function(a,d){b[a]||(b[a]=[]);var e=(++c).toString();return b[a].push({token:e,func:d}),e},a.subscribeOnce=function(a,d){b[a]||(b[a]=[]);var e=(++c).toString();return b[a][0]={token:e,func:d},e},a.unsubscribe=function(a){for(var c in b)if(b[c])for(var d=0,e=b[c].length;e>d;d++)if(b[c][d].token===a)return b[c].splice(d,1),a;return!1}}(d),c.exports=d}),define("job/src/1.0.0/views/my-job-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/common/util"),f=a("job/src/1.0.0/common/view-util"),g=Backbone.View.extend({tagName:"div",templateId:"my-job-tpl",expandTop:!1,events:{"click .m_top .m_switch":"toggleMyJob","click .datamsg .fill":"showAddMyJob","click .s_confirm":"addMyJob","click .s_cancel":"cancelEdit","click .u_r span":"showAddMyJob","click .mj_title .d_edit":"showAddMyJob","change #province":"getCity"},initialize:function(){this.listenTo(this.model,"change",function(){this.render();var a=_.keys(this.model.changed);if(this.model.set({opt:""},{silent:!0}),a.length>1){var b=_.omit(this.model.changed,"opt");this.saveMyJob(b)}})},render:function(a){this.$el.html(d.template(this.templateId,this.model.toJSON())),a&&a.html(this.$el),this.model.get("hasNoJob")&&$(".m_top .edit").hide()},showAddMyJob:function(){$(".unfilled").hide(),$(".filled").fadeIn(),$(".m_show").hide(),$(".d_edit").hide(),buriedPoint(35506002),this.toggleTopBtn(!0),this.fillProvince()},toggleTopBtn:function(a){a?($(".m_top .edit").hide(),$(".m_top .confirm").fadeIn(),$(".m_top .cancel").fadeIn(),this.$(".d_show").hide(),this.$(".d_fill").fadeIn()):($(".m_top .confirm").hide(),$(".m_top .cancel").hide(),$(".m_top .edit").fadeIn(),this.$(".d_fill").hide(),this.$(".d_show").fadeIn()),this.expandTop=!this.expandTop},addMyJob:function(){buriedPoint(35506006);var a=$.trim($("#myCompany").val()),b=$.trim($("#myJob").val()),c=e.getByteLength(b),d=/[`~!@#$%^&*_+<>{}\/'[\]]/gi;if(!b||!a)return $(".d_i_t").each(function(){""==$(this).val()&&$(this).addClass("d_not")}),f.alert("公司和职位不能为空！"),void 0;if(c>20)return f.alert("职位不能超过10个字"),void 0;if(c=e.getByteLength(a),c>50)return f.alert("公司不能超过25个字"),void 0;if(d.test(b)||b==$.trim($("#myJob").attr("placeholder")))return f.alert("请输入正确的工作职位"),void 0;if(d.test(a)||a==$.trim($("#myCompany").attr("placeholder")))return f.alert("请输入正确的公司名称"),void 0;var g=$("#province :selected"),h=+g.val()?g.text():"";g=$("#city :selected");var i=+g.val()?g.text():"",j="ok",k={company:a,position:b,province:h,city:i,opt:j};k.hasNoJob=""==a&&""==b,this.model.set(k)},saveMyJob:function(a){var b={};b.company=a.company?a.company:this.model.get("company"),b.position=a.position?a.position:this.model.get("position"),b.province=a.province?a.province:this.model.get("province"),b.city=a.city?a.city:this.model.get("city"),$.ajax({url:e.url.editWorkInfo,type:"POST",dataType:"json",data:b,success:function(a){200==a.returnCode?appView.jobInfoCollection.initData():seajs.log(a)},error:function(){seajs.log("JobInfo get more data from server failed")}})},hideDelBtn:function(a){a=a||window.event;var b=$(a.target||a.srcElement);b.find(".opeico").hide()},fillProvince:function(){var a=$("#province");if($("#city"),!a.children().length){var b=e.getProvinces();a.append('<option value="0">请选择</option>');for(var c in b)a.append('<option value="'+b[c].Id+'">'+b[c].Name+"</option>")}this.model.get("province")&&a.val(a.find("option:contains('"+this.model.get("province")+"')").val()),a.change()},getCity:function(){var a=this,b=+$("#province").val(),c=$("#city");return c.html(""),e.isBigCites(b)?(c.append($("#province option:selected").prop("outerHTML")),void 0):(c.append('<option value="0">请选择</option>'),$.ajax({url:e.url.city,type:"POST",dataType:"json",data:{proid:b},success:function(b){var d;for(var e in b)d="",a.model.get("city")==b[e].Name&&(d='selected="selected"'),c.append("<option "+d+' value="'+b[e].Id+'">'+b[e].Name+"</option>")},error:function(){seajs.log("JobInfo get more data from server failed")}}),void 0)},cancelEdit:function(){buriedPoint(35506007),this.expandTop=!1,this.render()}});c.exports=g}),define("job/src/1.0.0/views/my-tag-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/common/util"),f=a("job/src/1.0.0/common/view-util"),g=Backbone.View.extend({tagName:"div",templateId:"tag-edit-tpl",expandTop:!1,events:{"click .j_edit a.e_btn":"toggleAddTag","click .j_edit .e_sure":"refreshJobInfo","click .j_edit .e_cancel":"cancelEdit","click .j_show .del":"delTag","click .aj_btn":"addTag","click #recommendations-tag a":"recommendationsTag"},initialize:function(){this.newTags=_.clone(this.model.get("tags"))},render:function(a){this.$el.html(d.template(this.templateId,this.model.toJSON())),this.renderMyTags(),this.renderRecommendationsTags(),a&&a.html(this.$el)},renderMyTags:function(a){a=a||this.model.get("tags"),this.$(".j_show div").html(f.renderTags(a,{needRandom:void 0,myjob:!0}))},renderRecommendationsTags:function(a){a=a||this.model.get("tags"),this.$("#recommendations-tag").html(d.template("recommendations-tag-tpl",{tags:a,positionTags:positionTags}))},refreshData:function(){appView.initJobInfo({reset:!0,url:e.url.jobInfo})},toggleAddTag:function(){buriedPoint(35506008),$(".j_show").toggle(),this.$(".j_show li").length>0&&$(".j_show").show(),$(".j_add").toggle(),$("a.e_btn").toggle(),$("div.e_btn").toggle(),$(".j_tit").toggle(),this.$(".j_show li").length<1&&$(".j_tit").show(),$(".j_show .del").toggle()},refreshJobInfo:function(){var a=this,b=this.model.get("tags"),c=this.validateChange(b,this.newTags);if(c){var d=this.newTags.join(","),f={positions:d,offset:0};$(".aj_btn").attr("disabled","disabled"),$.ajax({url:e.url.saveTag,type:"POST",dataType:"json",data:f}).done(function(b){200==b.returnCode?($("#addTagText").val(""),a.model.set("tags",d?d.split(","):[]),a.toggleAddTag(),a.refreshData()):seajs.log(b)}).fail(function(){seajs.log("JobInfo get more data from server failed")}).always(function(){$(".aj_btn").removeAttr("disabled")})}else this.render()},validateChange:function(a,b){return!_.isEqual(b,a)},addTag:function(a){if(buriedPoint(35506009),$(".j_show").show(),this.$(".j_show li").length>=3)return f.alert("最多只能添加3个感兴趣的职位!"),void 0;var a=$.trim($("#addTagText").val())||a;return a&&a!=$.trim($("#addTagText").attr("placeholder"))?_.contains(this.newTags,a)?(f.alert("您添加的职位已存在"),void 0):e.getByteLength(a)>20?(f.alert("职位不能超过10个字"),void 0):(this.newTags.length||this.$(".j_show").show(),this.newTags.push(a),$("#addTagText").val(""),this.renderMyTags(this.newTags),$(".j_show .del").show(),void 0):(f.alert("请输入职位名称"),void 0)},delTag:function(a){buriedPoint(35506010),a=a||window.event;var b=$(a.target||a.srcElement),c=b.siblings("a").children("span").text();this.newTags=_.without(this.newTags,c),b.siblings("a").parent().remove(),this.renderRecommendationsTags(this.newTags)},cancelEdit:function(){buriedPoint(35506007),this.newTags=_.clone(this.model.get("tags")),this.render()},recommendationsTag:function(a){a=a||window.event;var b=$(a.target||a.srcElement);b.parent().hasClass("b_on")?(this.newTags=_.without(this.newTags,b.text()),this.renderMyTags(this.newTags),$(".j_show .del").toggle(),b.parent().removeClass("b_on")):(this.addTag(b.text()),this.renderRecommendationsTags(this.newTags))}});c.exports=g}),define("job/src/1.0.0/views/industry-tag-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module"),e=a("job/src/1.0.0/common/util"),f=Backbone.View.extend({tagName:"div",templateId:"industry-tag-edit-tpl",expandTop:!1,events:{"click .a1_l":"toggleAddTag"},initialize:function(a){this.model=new Backbone.Model(a.model),this.listenTo(this.model,"change",function(){this.render();var a=_.keys(this.model.changed);if(this.model.set({opt:""},{silent:!0}),a.length>1){var b=_.omit(this.model.changed,"opt");this.addTag(b)}})},render:function(a){this.$el.html(d.template(this.templateId,this.model.toJSON())),a&&a.html(this.$el)},renderMyTags:function(a){a&&appView.initJobInfo({reset:!0,url:e.url.industryInfo})},toggleAddTag:function(a){buriedPoint(35506045);var b=$(a.target);b=b.is("span")?b.parent():b,b.toggleClass("a_on"),this.saveTag()},saveTag:function(){var a=this,b=[],c=this.$(".a_on span");if(c.length)for(var d=0;d<c.length;d++)b.push(c[d].innerText);var f=b.join(","),g={tags:f};$.ajax({url:e.url.myIndustryTag,type:"POST",dataType:"json",data:g,success:function(b){200==b.returnCode?a.renderMyTags(!0):seajs.log(b)},error:function(){seajs.log("JobInfo get more data from server failed")}})}});c.exports=f}),define("job/src/1.0.0/views/search-job-view",["job/src/1.0.0/templates/templates_module","job/src/1.0.0/common/util","job/src/1.0.0/common/view-util","job/src/1.0.0/views/dialog-view","job/src/1.0.0/models/dialog-model","autocompleter","autocompleterStyle"],function(a,b,c){var d=a("job/src/1.0.0/templates/templates_module");a("job/src/1.0.0/common/util");var e=a("job/src/1.0.0/common/view-util"),f=Backbone.View.extend({tagName:"form",templateId:"search-job-tpl",events:{"click .jobbut":"searchJob"},initialize:function(){},render:function(){var a=this;return this.$el.html(d.template(this.templateId)),$(".search_end").html('<span class="job"></span>&nbsp;<span class="result">相关的搜索结果</span>'),e.bindAutoComplete({input:this.$(".jobtxt"),targetWrapper:this.$(".job_list")}),this.$el.submit(function(){return a.searchJob(),!1}),this.$el},searchJob:function(){var a=$(".jobsearch .jobtxt");if(!a.val())return!1;if(a.val().length>25)return e.alert("名字太长了"),!1;$(".search_end").fadeIn(),appView.setSearchText(a.val());var b={keyWords:a.val(),type:2};return appView.initJobInfo(b),!1}});c.exports=new f});
