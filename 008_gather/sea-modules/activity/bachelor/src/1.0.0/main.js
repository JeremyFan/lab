define("activity/bachelor/src/1.0.0/main",["backbone","marquee","./views/app","./views/pop-view","./templates/template","./templates/templates.html","./common/util","./models/score-model","placeholders"],function(a){a("backbone"),a("marquee"),window.buriedPoint=function(a){seajs.log("buriedPoint: "+a);try{wa_regIdCount(a)}catch(b){seajs.log(b)}};var b=a("./views/app");window.bachelorApp=new b,"ie"==$browser.type&&$browser.version<9&&a("placeholders").enable()}),define("activity/bachelor/src/1.0.0/views/app",["activity/bachelor/src/1.0.0/views/pop-view","activity/bachelor/src/1.0.0/templates/template","activity/bachelor/src/1.0.0/common/util","activity/bachelor/src/1.0.0/models/score-model"],function(a,b,c){var d=a("activity/bachelor/src/1.0.0/views/pop-view"),e=a("activity/bachelor/src/1.0.0/models/score-model"),f=a("activity/bachelor/src/1.0.0/common/util"),g=Backbone.View.extend({el:$(document.body),events:{"click .detail_btn":"showDetail","click .look_btn":"showMyScore","click .invite_btn":"showInvite","click .sign":"sign","click .publish_btn":"publish","mouseenter .top_nav":"showTop","mouseenter .week_nav":"showWeekTop"},initialize:function(){var a=this;this.isLogin=!!window.__islogin||!!window.__isLogin||!!window.PROFILE_DATA.profile,this.render(),this.showTop(!0),window.adapterObj={isLogin:function(){return a.isLogin},gameReturn:function(b){200==b.returnCode&&1==+b.data?(a.successView.model.set(b.result),a.successView.show()):a.failedView.show()},showLogin:function(){a.needLogin()},noChance:function(){a.moreChanceView.show()},noReplay:function(){a.noChanceView.show()},buriedPoint:function(a){buriedPoint(a)},replay:function(){try{document.getElementById("myMoviename1").replay()}catch(a){document.getElementById("myMoviename").replay()}}}},render:function(){!this.isLogin&&Fetion.APP.Web.Dialog.WindowLogin&&(this.loginView=new Fetion.APP.Web.Dialog.WindowLogin),this.renderSign(),this.detailView=new d({templateId:"detailTpl"}),this.successView=new d({templateId:"successTpl",shareType:f.shareType.success,model:new e}),this.failedView=new d({templateId:"failedTpl",shareType:f.shareType.failed}),this.scoreView=new d({templateId:"myScoreTpl",shareType:f.shareType.score,model:new e}),this.loginDialog=new d({templateId:"loginTpl",data:{isSign:!1}}),this.signLoginDialog=new d({templateId:"loginTpl",data:{isSign:!0}}),this.moreChanceView=new d({templateId:"moreChanceTpl"}),this.noChanceView=new d({templateId:"noChanceTpl",shareType:f.shareType.failed}),this.flower=$('<div class="framemask" style="height: 100%; width: 100%; position: fixed; display: none;">'),$(document.body).append(this.flower)},renderSign:function(){this.isLogin&&+__signStatus?($(".signed").show(),$(".sign").remove()):($(".sign").show(),$(".signed").hide())},initMarquee:function(a){var b={direction:"up",pauseOnHover:"true"};a.find("ol").height()>a.height()&&a.marquee(b)},showTop:function(a){var b=$(".top_con .top_list");(b.is(":hidden")||a===!0)&&(this.$(".week_nav.on").removeClass("on"),this.$(".top_nav").addClass("on"),this.$(".week_list").hide(),b.show(),this.initMarquee(b))},showWeekTop:function(){var a=$(".top_con .week_list");a.is(":hidden")&&(this.$(".top_nav.on").removeClass("on"),this.$(".week_nav").addClass("on"),this.$(".top_list").hide(),a.show(),this.initMarquee(a))},showDetail:function(){this.detailView.show()},showMyScore:function(){var a=this;this.needLogin(function(){buriedPoint(35420003),$.ajax({url:f.url.score,type:"POST"}).done(function(b){console.log(b),a.scoreView.model.set(b.data)}),a.scoreView.show()})},publish:function(){this.needLogin(function(){var a=$(".publish_con"),b=$.trim(a.val());b.length&&b!=a.attr("placeholder")?(buriedPoint(35420004),$.ajax({url:f.url.publish,data:{summary:b,type:1},type:"POST"}).done(function(a){console.log(a),200==a.returnCode?(f.toast("发布成功！"),$(".publish_con").val("")):f.toast("发布失败！")})):f.toast("请输入内容！")})},needLogin:function(a,b){this.isLogin?a&&a():b?this.signLoginDialog.show():this.loginDialog.show()},showInvite:function(){var a=this;this.needLogin(function(){new Fetion.APP.Web.Dialog.Services.CommonInvite({limitcount:10,sendHandler:function(b,c){a.inviteBuddies(b,c)}})})},inviteBuddies:function(a,b){if(!a)return f.toast("请先选择好友！"),void 0;buriedPoint(35420005);var c={buddys:a};$.ajax({url:f.url.invite,type:"POST",data:c}).done(function(a){200==a.returnCode&&(f.toast("邀请成功！"),b.close())})},showLogin:function(){!this.isLogin&&this.loginView&&this.loginView.open()},sign:function(){var a=this;this.needLogin(function(){buriedPoint(35420001),$.ajax({url:f.url.sign,type:"POST"}).done(function(b){switch(console.log(b),b.returnCode){case 200:window.__signStatus=1,a.renderSign(),f.toast("签到成功!");break;case 202:f.toast("已经签过到了!")}})},!0)},showFlower:function(){this.flower.show()},hideFlower:function(){this.flower.fadeOut()}});c.exports=g}),define("activity/bachelor/src/1.0.0/views/pop-view",["activity/bachelor/src/1.0.0/templates/template","activity/bachelor/src/1.0.0/common/util"],function(a,b,c){var d=a("activity/bachelor/src/1.0.0/templates/template"),e=a("activity/bachelor/src/1.0.0/common/util"),f=Backbone.View.extend({className:"skinv pop-container",events:{"click .close":"hide","click .tomorrow":"hide","click .share-friend":"shareToFriend","click .try-again":"tryAgain","click .sign_btn":"showLogin"},initialize:function(a){this.templateId=a.templateId,this.initialized=!1,this.jsonData=a.data||{},this.shareType=a.shareType,this.render(),this.model&&this.listenTo(this.model,"change",this.render)},render:function(){var a=this.model?this.model.attributes:this.jsonData;this.$el.html(d.template(this.templateId,a)),this.initialized||(this.initialized=!0,$(document.body).append(this.$el))},show:function(){bachelorApp.showFlower(),this.$el.fadeIn()},hide:function(){this.$el.fadeOut(),bachelorApp.hideFlower(),(this.shareType==e.shareType.failed||this.shareType==e.shareType.success)&&this.replay()},replay:function(){adapterObj.replay()},tryAgain:function(){this.hide(),this.replay()},shareToFriend:function(){var a=e.getShareTips(this.shareType,this.model?this.model.attributes:null);buriedPoint(35420008),$.ajax({url:e.url.publish,data:{summary:a},type:"POST"}).done(function(a){switch(console.log(a),a.returnCode){case 200:e.toast("分享成功！");break;case 503:e.toast("已分享！")}}),this.hide(),(this.shareType==e.shareType.success||this.shareType==e.shareType.failed)&&this.tryAgain()},showLogin:function(){buriedPoint(35420006),bachelorApp.showLogin(),this.hide()}});c.exports=f}),define("activity/bachelor/src/1.0.0/templates/template",[],function(a,b,c){var d=a("activity/bachelor/src/1.0.0/templates/templates.html");_.templateSettings={interpolate:/\{\{=(.+?)\}\}/g,evaluate:/\{\{(.+?)\}\}/g};var e={};$(d).filter("script").each(function(){var a=$(this);e[this.id]=_.template(a.html())});var f={template:function(a,b){return b=b||{},e[a](b)}};c.exports=f}),define("activity/bachelor/src/1.0.0/templates/templates.html",[],'<!-- 拆散成功 -->\n<script type="text/template" id="successTpl">\n    <div class="pop"><!--成功拆散-->\n        <a href="javascript: void(0);" class="close"></a>\n\n        <h3 class="p_c">成功拆散</h3>\n\n        <div class="popa">\n            <div class="mark clr">\n                <span class="mark_left">\n                    获得了：<br>\n                    <em></em><i>{{=gotHeart}}</i>\n                </span>\n            </div>\n            <div class="msg p_c">\n                桃花运暴增，简直是饿棍中的战斗机！<br>\n                再接再厉，脱单指日可待！\n            </div>\n            <div class="btn clr">\n                <span class="a_b share-friend">分享至朋友圈</span>\n                <span class="b_b try-again"><a href="#">再来一次</a></span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- 拆散失败 -->\n<script type="text/template" id="failedTpl">\n    <div class="pop"><!--拆散失败-->\n        <a href="javascript: void(0);" class="close"></a>\n\n        <h3 class="p_c">拆散失败</h3>\n\n        <div class="popa">\n            <div class="msg p_c p_p">\n                很遗憾您未能成功拆散！继续战斗吧，<br>\n                成就一代恶棍，为自己代言！\n            </div>\n            <div class="btn clr">\n                <span class="a_b share-friend">分享至朋友圈</span>\n                <span class="b_b try-again"><a href="#">再来一次</a></span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!--登录提示-->\n<script type="text/template" id="loginTpl">\n    <div class="pop"><!--去登陆-->\n        <a href="javascript: void(0);" class="close"></a>\n\n        <h3 class="p_c">尊敬的用户</h3>\n\n        <div class="popa">\n            <div class="msg p_c p_p{{=isSign?\'2\':\'\'}}">\n                {{ if(isSign){ }}\n                您还未登录，请登录后再签到\n                {{ } else { }}\n                想成为一个合格的饿棍？<br>\n                亲，您还没登录哦！\n                {{ } }}\n            </div>\n            <div class="btn clr">\n                <span class="sign_btn">去登录</span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- 更多机会 -->\n<script type="text/template" id="moreChanceTpl">\n    <div class="pop"><!--获更多游戏机会-->\n        <a href="javascript: void(0);" class="close"></a>\n        <h4 class="p_c">赢iPhone6，将拆侣进行到底！<br>\n            想获取更多游戏机会？</h4>\n\n        <div class="popa">\n            <div class="explain">\n                <p>\n                    每日登录，5次<br>\n                    每日签到，+1次<br>\n                    发布动态，+1次<br>\n                    邀请好友，+1次\n                </p>\n            </div>\n            <div class="btn clr">\n                <span class="sign_btn tomorrow">我知道了</span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- 更多机会 -->\n<script type="text/template" id="noChanceTpl">\n    <div class="pop"><!--明天再来-->\n        <a href="javascript: void(0);" class="close"></a>\n        <h4 class="p_c">您已没有更多游戏机会哦！<br>\n            明天继续来战斗吧!</h4>\n        <div class="popa">\n            <div class="msg p_c p_p2">\n                拆情侣，赢iPhone6，根本停不下来！\n            </div>\n            <div class="btn clr">\n                <span class="a_b share-friend">分享至朋友圈</span>\n                <span class="b_b tomorrow">明天再来</span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- 我的桃心 -->\n<script type="text/template" id="myScoreTpl">\n    <div class="pop2"><!--我的桃心-->\n        <a href="javascript: void(0);" class="close"></a>\n\n        <h3>我的桃心</h3>\n\n        <div class="popa2">\n            <div class="mark clr">\n                <span class="mark_left">\n                    您已经累计获取 :<br>\n                    <em></em><i>{{=gotHeart}}</i>\n                </span>\n                <span class="mark_con">\n                    总排名:<br>\n                    <em></em><i>{{=rank}}</i>\n                </span>\n                <span class="mark_right">\n                    打败了：<br>\n                    <i>{{=percent}}%</i>的用户\n                </span>\n            </div>\n            <div class="msg p_c">\n                <!--有桃心提示-->\n                <span class="urge">再接再厉哦，脱单指日可待！</span><br>\n                <!--无桃心提示-->\n                <span class="remind" style="display:none">\n                    您还未获取桃心，继续战斗吧骚年，<br>\n                    <em>我们的宗旨是：做一名合格的饿棍，让情侣过节，让自己脱单！</em>\n                </span>\n            </div>\n            <div class="btn clr">\n                <span class="a_b share-friend btn-con">分享至朋友圈</span>\n            </div>\n        </div>\n    </div>\n</script>\n\n<!-- 活动详情 -->\n<script type="text/template" id="detailTpl">\n    <div class="pop4"><!--活动规则-->\n        <a href="javascript: void(0);" class="close"></a>\n\n        <h3>活动规则</h3>\n\n        <div class="popa4">\n            <h4>获奖规则：</h4>\n            <ul class="prize clr">\n                <li>\n                    <h5>总冠军</h5>\n\n                    <div class="iphone">\n                    </div>\n                    <span>iPhone6，共一部</span>\n\n                    <p>\n                        <strong>活动期间：</strong><br>\n                        总排行榜排名第一的用户将获得iPhone6一部；\n                    </p>\n                </li>\n                <li>\n                    <h5>周冠军</h5>\n\n                    <div class="audio">\n                    </div>\n                    <span>幻想音响，共五个</span>\n\n                    <p>\n                        <strong>活动期间：</strong><br>\n                        每周排行榜排名第一的用户，将获得幻想音响一台，共计五个周期，五个周冠军；\n                    </p>\n                </li>\n            </ul>\n            <h4>派奖时间及方式：</h4>\n            <ul class="illustrate">\n                <li>1）活动结束后两个工作日内（11月26-12月30），由工作人员统计中奖用户信息，并通过电话、飞信\n                    和用户沟通，确认中奖用户信息；\n                </li>\n                <li>2）实物奖品（iPhone6、音响）在活动结束后5个工作日内（2015年1月2号-1月8号），将会通过邮寄的方式\n                    寄送到用户指定收获地址；\n                </li>\n                <li>3）备注：奖品的获取和寄送，如由于用户告知信息错误导致无法收到奖品，后果将由用户自行承担。</li>\n            </ul>\n        </div>\n    </div>\n</script>'),define("activity/bachelor/src/1.0.0/common/util",[],function(a,b,c){var d="http://i.feixin.10086.cn/activity/bachelor",e="bachelor/",f={url:{sign:e+"sign",score:e+"getHeartNum",publish:e+"publishCount",invite:e+"inviteCount",share:"/feedoperation/publishStatus"},shareType:{failed:0,success:1,score:2,share:3},getShareTips:function(a,b){var c="";switch(a){case f.shareType.failed:c="想接吻？没门儿！史上最腹黑游戏，拆情侣，赢iPhone6，根本停不下来，猛戳";break;case f.shareType.success:c="拆散了一对情侣，获得"+b.gotHeart+"颗桃心，我也是蛮拼了！史上最腹黑游戏，拆情侣，赢iPhone6，根本停不下来，猛戳";break;case f.shareType.score:c=+b.gotHeart?"拆情侣，赢iPhone6，我已获取"+b.gotHeart+"颗桃心，打败了"+b.percent+"%的用户，根本停不下来，不服来战！猛戳":"想接吻？没门儿！史上最腹黑游戏，拆情侣，赢iPhone6，根本停不下来，猛戳";break;case f.shareType.share:c="想接吻？没门儿！史上最腹黑游戏，拆情侣，赢iPhone6，根本停不下来，我已经沦陷了，你还在等什么？猛戳"}return c+=d},toast:function(a){var b=$("<div>");b.addClass("toast-popup").append($("<span>").text(a)),$(document.body).append(b),b.fadeIn(),setTimeout(function(){b.fadeOut(400,function(){b.remove()})},1500)}};c.exports=f}),define("activity/bachelor/src/1.0.0/models/score-model",[],function(a,b,c){var d=Backbone.Model.extend({defaults:{percent:0,rank:0,gotHeart:0}});c.exports=d});
